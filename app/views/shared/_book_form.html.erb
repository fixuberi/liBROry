<%= form_for(@book) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <%= f.label  :cover %>
  <% if @book.cover.attached? %>
    <%= image_tag @book.cover, class: 'cover' %>
  <% end %>
  <%= f.file_field :cover %>

  <%= f.label :title %>
  <%= f.text_field :title %>

  <%= f.label :authors %>
  <%= f.collection_check_boxes :author_ids, Author.order(:name), :id,:name,
                          { checked: @book.author_ids.map(&:to_param) } do  |b| %>
    <div class="collection-check-box">
      <%= b.check_box %>
      <%= b.label %>
    </div>
  <% end %>

  <%= f.label :groups %>
  <%= f.collection_check_boxes :group_ids, Group.all, :id,:name,
                               { checked: @book.group_ids.map(&:to_param) } do  |b| %>
    <div class="collection-check-box">
      <%= b.check_box %>
      <%= b.label %>
    </div>
  <% end %>

  <%= f.submit action, class: "btn btn-large btn-primary" %>
<% end %>